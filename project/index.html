<!DOCTYPE html>
<html>
<head>
<title>Simple Map</title>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link href="layout/styles/layout.css" rel="stylesheet" type="text/css" media="all">
<style>
  /* Always set the map height explicitly to define the size of the div
   * element that contains the map. */
  #map {
    height: 400px;
    width: 100%;
  }
  /* Optional: Makes the sample page fill the window. */
  html, body {
    height: 100%;
    margin: 0;
    padding: 0;
  }
</style>
</head>
<body id="top">

<div class="wrapper row1">
  <header id="header" class="hoc clear"> 
    <div id="logo" class="fl_left">
      <h1><a href="index.html">麥當勞和星巴克調查 <span style="display:inline-block; width: 30;"></span> 可能會用到?<--<span style="display:inline-block; width: 10;"></span></a></h1>
    </div>
    <nav id="mainav" class="fl_right">
      <ul class="clear">
        <li class="active"><a href="index.html">Home</a></li>
        <li><a class="drop" href="#">Pages</a>
          <ul>
            <li><a href="pages/gallery.html">Gallery</a></li>
            <li><a href="pages/full-width.html">Full Width</a></li>
            <li><a href="pages/sidebar-left.html">Sidebar Left</a></li>
            <li><a href="pages/sidebar-right.html">Sidebar Right</a></li>
            <li><a href="pages/basic-grid.html">Basic Grid</a></li>
          </ul>
        </li>
        <li><a class="drop" href="#">Dropdown</a>
          <ul>
            <li><a href="#">Level 2</a></li>
            <li><a class="drop" href="#">Level 2 + Drop</a>
              <ul>
                <li><a href="#">Level 3</a></li>
                <li><a href="#">Level 3</a></li>
                <li><a href="#">Level 3</a></li>
              </ul>
            </li>
            <li><a href="#">Level 2</a></li>
          </ul>
        </li>
        <li><a href="#">Link Text</a></li>
        <li><a href="#">Link Text</a></li>
      </ul>
    </nav>
  </header>
</div>


<div id="map"></div>
<script>
  function initMap() {
    // options
    var options = {
      zoom: 13,
      center: {lat: 25.0169826, lng: 121.5376303}
    }
    
    // New map
    var map = new google.maps.Map(document.getElementById('map'), options);
    
    // default icons
    var mc_icon = {
        url: "https://ntu-csx-d3js.github.io/b05902108/project/image/mcdonald_icon.png", // url
        scaledSize: new google.maps.Size(25, 25), // scaled size
    };
    var star_icon = {
        url: "https://ntu-csx-d3js.github.io/b05902108/project/image/starbucks_icon.png", // url
        scaledSize: new google.maps.Size(25, 25), // scaled size
    };

    // deal with starbuck data
    $.getJSON("https://ntu-csx-d3js.github.io/b05902108/project/data/starbucks.json", function(starData) {
        console.log(starData); 
        var d_len = starData.length;
        for(var i = 0; i < d_len; i++){
            addMarker(starData[i], star_icon);
          }
           
          // draw circle with problistic density function
          var center_lat = 0;
          var center_lng = 0;
          var max_len = 0;
          for(var i = 0; i < d_len; i++){
            center_lat = center_lat + starData[i].coords.lat;
            center_lng = center_lng + starData[i].coords.lng;
          }
          center_lat = center_lat/d_len;
          center_lng = center_lng/d_len;
          center = {lat: center_lat, lng: center_lng};
          var cityCircle = new google.maps.Circle({
              strokeColor: '#FFFFFF',
              strokeOpacity: 0.8,
              strokeWeight: 2,
              fillColor: '#FF0000',
              fillOpacity: 0.35,
              map: map,
              center: center,
              radius: 2000
          });

    });
    
    // Add Marker Function
    function addMarker(props, what_icon){
      var marker = new google.maps.Marker({
        position: props.coords,
        map: map,
        icon: what_icon
      });

      if(what_icon){
        marker.setIcon(what_icon);
      }
      if(props.content){
        var infoWindow = new google.maps.InfoWindow({
          maxWidth: 100,
          maxHeight:100,
          content: props.content
        });

        marker.addListener('click', function(){
          infoWindow.open(map, marker);
        })
      }
    }
  }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDCHe_BArJHasg07-VcENIwq0Pjeork94g&callback=initMap"
async defer></script>

<div class="wrapper row3">
  <main class="hoc container clear"> 
    <div class="group btmspace-80">
      <div class="one_half first">
        <h4>Vivamus lobortis consequat</h4>
        <p>Ipsum quisque tincidunt placerat dui vitae aliquet nisl volutpat vitae cras non tristique nisl phasellus tempus elit proin vel imperdiet diam mauris efficitur nisl elit eu ornare massa ultricies.</p>
      </div>
      <div class="one_half">
        <p>Vestibulum venenatis sed id nisl magna suspendisse a mauris et neque sollicitudin ullamcorper fusce molestie felis mi id.</p>
        <p>Sollicitudin augue faucibus eu sed dictum egestas magna a pretium elit dapibus vitae etiam auctor arcu enim eu tempus elit.</p>
      </div>
    </div>
    <div class="group">
      <article class="one_third first"><a href="#"><i class="block btmspace-15 fa fa-4x fa-key"></i></a>
        <h4>Semper mauris sed</h4>
        <p>Commodo non nunc leo risus lacinia eget leo sed interdum molestie lorem sed dapibus ante sit amet egestas.</p>
      </article>
      <article class="one_third"><a href="#"><i class="block btmspace-15 fa fa-4x fa-leaf"></i></a>
        <h4>Elit porttitor mauris</h4>
        <p>Ligula pharetra lectus sed rhoncus enim nibh eu metus praesent nec bibendum lectus suspendisse vel dolor nec.</p>
      </article>
      <article class="one_third"><a href="#"><i class="block btmspace-15 fa fa-4x fa-legal"></i></a>
        <h4>Auctor pretium vel</h4>
        <p>Sed facilisis magna vitae metus vulputate eleifend mauris gravida porta erat a lacinia vivamus egestas dapibus eros quis.</p>
      </article>
    </div>
    <div class="clear"></div>
  </main>
</div>

<div class="wrapper row5">
  <div id="copyright" class="hoc clear"> 
    <p class="fl_left">Copyright &copy; 2016 - All Rights Reserved - <a href="#">Domain Name</a></p>
    <p class="fl_right">Template by <a target="_blank" href="http://www.os-templates.com/" title="Free Website Templates">OS Templates</a></p>
  </div>
</div>
<a id="backtotop" href="#top"><i class="fa fa-chevron-up"></i></a>
<!-- JAVASCRIPTS -->
<script src="layout/scripts/jquery.min.js"></script>
<script src="layout/scripts/jquery.backtotop.js"></script>
<script src="layout/scripts/jquery.mobilemenu.js"></script>
</body>
</html>